
import java.util.ArrayList;

public class Teapot extends RayObject{
	public int NUM_PATCHES = 28;
	public int NUM_VERTS = 269;
	ArrayList<Bezier> beziers = new ArrayList<Bezier>();
	MaterialProps mats;
	
	double tVerts[][] = {
			  {   1.4000000,    2.2500000,    0.0000000},
			  {   1.4000000,    2.2500000,    0.7840000},
			  {   0.7840000,    2.2500000,    1.4000000},
			  {   0.0000000,    2.2500000,    1.4000000},
			  {   1.3375000,    2.3812500,    0.0000000},
			  {   1.3375000,    2.3812500,    0.7490000},
			  {   0.7490000,    2.3812500,    1.3375000},
			  {   0.0000000,    2.3812500,    1.3375000},
			  {   1.4375000,    2.3812500,    0.0000000},
			  {   1.4375000,    2.3812500,    0.8050000},
			  {   0.8050000,    2.3812500,    1.4375000},
			  {   0.0000000,    2.3812500,    1.4375000},
			  {   1.5000000,    2.2500000,    0.0000000},
			  {   1.5000000,    2.2500000,    0.8400000},
			  {   0.8400000,    2.2500000,    1.5000000},
			  {   0.0000000,    2.2500000,    1.5000000},
			  {  -0.7840000,    2.2500000,    1.4000000},
			  {  -1.4000000,    2.2500000,    0.7840000},
			  {  -1.4000000,    2.2500000,    0.0000000},
			  {  -0.7490000,    2.3812500,    1.3375000},
			  {  -1.3375000,    2.3812500,    0.7490000},
			  {  -1.3375000,    2.3812500,    0.0000000},
			  {  -0.8050000,    2.3812500,    1.4375000},
			  {  -1.4375000,    2.3812500,    0.8050000},
			  {  -1.4375000,    2.3812500,    0.0000000},
			  {  -0.8400000,    2.2500000,    1.5000000},
			  {  -1.5000000,    2.2500000,    0.8400000},
			  {  -1.5000000,    2.2500000,    0.0000000},
			  {  -1.4000000,    2.2500000,   -0.7840000},
			  {  -0.7840000,    2.2500000,   -1.4000000},
			  {   0.0000000,    2.2500000,   -1.4000000},
			  {  -1.3375000,    2.3812500,   -0.7490000},
			  {  -0.7490000,    2.3812500,   -1.3375000},
			  {   0.0000000,    2.3812500,   -1.3375000},
			  {  -1.4375000,    2.3812500,   -0.8050000},
			  {  -0.8050000,    2.3812500,   -1.4375000},
			  {   0.0000000,    2.3812500,   -1.4375000},
			  {  -1.5000000,    2.2500000,   -0.8400000},
			  {  -0.8400000,    2.2500000,   -1.5000000},
			  {   0.0000000,    2.2500000,   -1.5000000},
			  {   0.7840000,    2.2500000,   -1.4000000},
			  {   1.4000000,    2.2500000,   -0.7840000},
			  {   0.7490000,    2.3812500,   -1.3375000},
			  {   1.3375000,    2.3812500,   -0.7490000},
			  {   0.8050000,    2.3812500,   -1.4375000},
			  {   1.4375000,    2.3812500,   -0.8050000},
			  {   0.8400000,    2.2500000,   -1.5000000},
			  {   1.5000000,    2.2500000,   -0.8400000},
			  {   1.7500000,    1.7250000,    0.0000000},
			  {   1.7500000,    1.7250000,    0.9800000},
			  {   0.9800000,    1.7250000,    1.7500000},
			  {   0.0000000,    1.7250000,    1.7500000},
			  {   2.0000000,    1.2000000,    0.0000000},
			  {   2.0000000,    1.2000000,    1.1200000},
			  {   1.1200000,    1.2000000,    2.0000000},
			  {   0.0000000,    1.2000000,    2.0000000},
			  {   2.0000000,    0.7500000,    0.0000000},
			  {   2.0000000,    0.7500000,    1.1200000},
			  {   1.1200000,    0.7500000,    2.0000000},
			  {   0.0000000,    0.7500000,    2.0000000},
			  {  -0.9800000,    1.7250000,    1.7500000},
			  {  -1.7500000,    1.7250000,    0.9800000},
			  {  -1.7500000,    1.7250000,    0.0000000},
			  {  -1.1200000,    1.2000000,    2.0000000},
			  {  -2.0000000,    1.2000000,    1.1200000},
			  {  -2.0000000,    1.2000000,    0.0000000},
			  {  -1.1200000,    0.7500000,    2.0000000},
			  {  -2.0000000,    0.7500000,    1.1200000},
			  {  -2.0000000,    0.7500000,    0.0000000},
			  {  -1.7500000,    1.7250000,   -0.9800000},
			  {  -0.9800000,    1.7250000,   -1.7500000},
			  {   0.0000000,    1.7250000,   -1.7500000},
			  {  -2.0000000,    1.2000000,   -1.1200000},
			  {  -1.1200000,    1.2000000,   -2.0000000},
			  {   0.0000000,    1.2000000,   -2.0000000},
			  {  -2.0000000,    0.7500000,   -1.1200000},
			  {  -1.1200000,    0.7500000,   -2.0000000},
			  {   0.0000000,    0.7500000,   -2.0000000},
			  {   0.9800000,    1.7250000,   -1.7500000},
			  {   1.7500000,    1.7250000,   -0.9800000},
			  {   1.1200000,    1.2000000,   -2.0000000},
			  {   2.0000000,    1.2000000,   -1.1200000},
			  {   1.1200000,    0.7500000,   -2.0000000},
			  {   2.0000000,    0.7500000,   -1.1200000},
			  {   2.0000000,    0.3000000,    0.0000000},
			  {   2.0000000,    0.3000000,    1.1200000},
			  {   1.1200000,    0.3000000,    2.0000000},
			  {   0.0000000,    0.3000000,    2.0000000},
			  {   1.5000000,    0.0750000,    0.0000000},
			  {   1.5000000,    0.0750000,    0.8400000},
			  {   0.8400000,    0.0750000,    1.5000000},
			  {   0.0000000,    0.0750000,    1.5000000},
			  {   1.5000000,    0.0000000,    0.0000000},
			  {   1.5000000,    0.0000000,    0.8400000},
			  {   0.8400000,    0.0000000,    1.5000000},
			  {   0.0000000,    0.0000000,    1.5000000},
			  {  -1.1200000,    0.3000000,    2.0000000},
			  {  -2.0000000,    0.3000000,    1.1200000},
			  {  -2.0000000,    0.3000000,    0.0000000},
			  {  -0.8400000,    0.0750000,    1.5000000},
			  {  -1.5000000,    0.0750000,    0.8400000},
			  {  -1.5000000,    0.0750000,    0.0000000},
			  {  -0.8400000,    0.0000000,    1.5000000},
			  {  -1.5000000,    0.0000000,    0.8400000},
			  {  -1.5000000,    0.0000000,    0.0000000},
			  {  -2.0000000,    0.3000000,   -1.1200000},
			  {  -1.1200000,    0.3000000,   -2.0000000},
			  {   0.0000000,    0.3000000,   -2.0000000},
			  {  -1.5000000,    0.0750000,   -0.8400000},
			  {  -0.8400000,    0.0750000,   -1.5000000},
			  {   0.0000000,    0.0750000,   -1.5000000},
			  {  -1.5000000,    0.0000000,   -0.8400000},
			  {  -0.8400000,    0.0000000,   -1.5000000},
			  {   0.0000000,    0.0000000,   -1.5000000},
			  {   1.1200000,    0.3000000,   -2.0000000},
			  {   2.0000000,    0.3000000,   -1.1200000},
			  {   0.8400000,    0.0750000,   -1.5000000},
			  {   1.5000000,    0.0750000,   -0.8400000},
			  {   0.8400000,    0.0000000,   -1.5000000},
			  {   1.5000000,    0.0000000,   -0.8400000},
			  {  -1.6000000,    1.8750000,    0.0000000},
			  {  -1.6000000,    1.8750000,    0.3000000},
			  {  -1.5000000,    2.1000000,    0.3000000},
			  {  -1.5000000,    2.1000000,    0.0000000},
			  {  -2.3000000,    1.8750000,    0.0000000},
			  {  -2.3000000,    1.8750000,    0.3000000},
			  {  -2.5000000,    2.1000000,    0.3000000},
			  {  -2.5000000,    2.1000000,    0.0000000},
			  {  -2.7000000,    1.8750000,    0.0000000},
			  {  -2.7000000,    1.8750000,    0.3000000},
			  {  -3.0000000,    2.1000000,    0.3000000},
			  {  -3.0000000,    2.1000000,    0.0000000},
			  {  -2.7000000,    1.6500000,    0.0000000},
			  {  -2.7000000,    1.6500000,    0.3000000},
			  {  -3.0000000,    1.6500000,    0.3000000},
			  {  -3.0000000,    1.6500000,    0.0000000},
			  {  -1.5000000,    2.1000000,   -0.3000000},
			  {  -1.6000000,    1.8750000,   -0.3000000},
			  {  -2.5000000,    2.1000000,   -0.3000000},
			  {  -2.3000000,    1.8750000,   -0.3000000},
			  {  -3.0000000,    2.1000000,   -0.3000000},
			  {  -2.7000000,    1.8750000,   -0.3000000},
			  {  -3.0000000,    1.6500000,   -0.3000000},
			  {  -2.7000000,    1.6500000,   -0.3000000},
			  {  -2.7000000,    1.4250000,    0.0000000},
			  {  -2.7000000,    1.4250000,    0.3000000},
			  {  -3.0000000,    1.2000000,    0.3000000},
			  {  -3.0000000,    1.2000000,    0.0000000},
			  {  -2.5000000,    0.9750000,    0.0000000},
			  {  -2.5000000,    0.9750000,    0.3000000},
			  {  -2.6500000,    0.7875000,    0.3000000},
			  {  -2.6500000,    0.7875000,    0.0000000},
			  {  -2.0000000,    0.7500000,    0.3000000},
			  {  -1.9000000,    0.4500000,    0.3000000},
			  {  -1.9000000,    0.4500000,    0.0000000},
			  {  -3.0000000,    1.2000000,   -0.3000000},
			  {  -2.7000000,    1.4250000,   -0.3000000},
			  {  -2.6500000,    0.7875000,   -0.3000000},
			  {  -2.5000000,    0.9750000,   -0.3000000},
			  {  -1.9000000,    0.4500000,   -0.3000000},
			  {  -2.0000000,    0.7500000,   -0.3000000},
			  {   1.7000000,    1.2750000,    0.0000000},
			  {   1.7000000,    1.2750000,    0.6600000},
			  {   1.7000000,    0.4500000,    0.6600000},
			  {   1.7000000,    0.4500000,    0.0000000},
			  {   2.6000000,    1.2750000,    0.0000000},
			  {   2.6000000,    1.2750000,    0.6600000},
			  {   3.1000000,    0.6750000,    0.6600000},
			  {   3.1000000,    0.6750000,    0.0000000},
			  {   2.3000000,    1.9500000,    0.0000000},
			  {   2.3000000,    1.9500000,    0.2500000},
			  {   2.4000000,    1.8750000,    0.2500000},
			  {   2.4000000,    1.8750000,    0.0000000},
			  {   2.7000000,    2.2500000,    0.0000000},
			  {   2.7000000,    2.2500000,    0.2500000},
			  {   3.3000000,    2.2500000,    0.2500000},
			  {   3.3000000,    2.2500000,    0.0000000},
			  {   1.7000000,    0.4500000,   -0.6600000},
			  {   1.7000000,    1.2750000,   -0.6600000},
			  {   3.1000000,    0.6750000,   -0.6600000},
			  {   2.6000000,    1.2750000,   -0.6600000},
			  {   2.4000000,    1.8750000,   -0.2500000},
			  {   2.3000000,    1.9500000,   -0.2500000},
			  {   3.3000000,    2.2500000,   -0.2500000},
			  {   2.7000000,    2.2500000,   -0.2500000},
			  {   2.8000000,    2.3250000,    0.0000000},
			  {   2.8000000,    2.3250000,    0.2500000},
			  {   3.5250000,    2.3437500,    0.2500000},
			  {   3.5250000,    2.3437500,    0.0000000},
			  {   2.9000000,    2.3250000,    0.0000000},
			  {   2.9000000,    2.3250000,    0.1500000},
			  {   3.4500000,    2.3625000,    0.1500000},
			  {   3.4500000,    2.3625000,    0.0000000},
			  {   2.8000000,    2.2500000,    0.0000000},
			  {   2.8000000,    2.2500000,    0.1500000},
			  {   3.2000000,    2.2500000,    0.1500000},
			  {   3.2000000,    2.2500000,    0.0000000},
			  {   3.5250000,    2.3437500,   -0.2500000},
			  {   2.8000000,    2.3250000,   -0.2500000},
			  {   3.4500000,    2.3625000,   -0.1500000},
			  {   2.9000000,    2.3250000,   -0.1500000},
			  {   3.2000000,    2.2500000,   -0.1500000},
			  {   2.8000000,    2.2500000,   -0.1500000},
			  {   0.0000000,    3.0000000,    0.0000000},
			  {   0.0000000,    3.0000000,    0.0020000},
			  {   0.0020000,    3.0000000,    0.0000000},
			  {   0.8000000,    3.0000000,    0.0000000},
			  {   0.8000000,    3.0000000,    0.4500000},
			  {   0.4500000,    3.0000000,    0.8000000},
			  {   0.0000000,    3.0000000,    0.8000000},
			  {   0.0000000,    2.7000000,    0.0000000},
			  {   0.2000000,    2.5500000,    0.0000000},
			  {   0.2000000,    2.5500000,    0.1120000},
			  {   0.1120000,    2.5500000,    0.2000000},
			  {   0.0000000,    2.5500000,    0.2000000},
			  {  -0.0020000,    3.0000000,    0.0000000},
			  {  -0.4500000,    3.0000000,    0.8000000},
			  {  -0.8000000,    3.0000000,    0.4500000},
			  {  -0.8000000,    3.0000000,    0.0000000},
			  {  -0.1120000,    2.5500000,    0.2000000},
			  {  -0.2000000,    2.5500000,    0.1120000},
			  {  -0.2000000,    2.5500000,    0.0000000},
			  {   0.0000000,    3.0000000,   -0.0020000},
			  {  -0.8000000,    3.0000000,   -0.4500000},
			  {  -0.4500000,    3.0000000,   -0.8000000},
			  {   0.0000000,    3.0000000,   -0.8000000},
			  {  -0.2000000,    2.5500000,   -0.1120000},
			  {  -0.1120000,    2.5500000,   -0.2000000},
			  {   0.0000000,    2.5500000,   -0.2000000},
			  {   0.4500000,    3.0000000,   -0.8000000},
			  {   0.8000000,    3.0000000,   -0.4500000},
			  {   0.1120000,    2.5500000,   -0.2000000},
			  {   0.2000000,    2.5500000,   -0.1120000},
			  {   0.4000000,    2.4000000,    0.0000000},
			  {   0.4000000,    2.4000000,    0.2240000},
			  {   0.2240000,    2.4000000,    0.4000000},
			  {   0.0000000,    2.4000000,    0.4000000},
			  {   1.3000000,    2.4000000,    0.0000000},
			  {   1.3000000,    2.4000000,    0.7280000},
			  {   0.7280000,    2.4000000,    1.3000000},
			  {   0.0000000,    2.4000000,    1.3000000},
			  {   1.3000000,    2.2500000,    0.0000000},
			  {   1.3000000,    2.2500000,    0.7280000},
			  {   0.7280000,    2.2500000,    1.3000000},
			  {   0.0000000,    2.2500000,    1.3000000},
			  {  -0.2240000,    2.4000000,    0.4000000},
			  {  -0.4000000,    2.4000000,    0.2240000},
			  {  -0.4000000,    2.4000000,    0.0000000},
			  {  -0.7280000,    2.4000000,    1.3000000},
			  {  -1.3000000,    2.4000000,    0.7280000},
			  {  -1.3000000,    2.4000000,    0.0000000},
			  {  -0.7280000,    2.2500000,    1.3000000},
			  {  -1.3000000,    2.2500000,    0.7280000},
			  {  -1.3000000,    2.2500000,    0.0000000},
			  {  -0.4000000,    2.4000000,   -0.2240000},
			  {  -0.2240000,    2.4000000,   -0.4000000},
			  {   0.0000000,    2.4000000,   -0.4000000},
			  {  -1.3000000,    2.4000000,   -0.7280000},
			  {  -0.7280000,    2.4000000,   -1.3000000},
			  {   0.0000000,    2.4000000,   -1.3000000},
			  {  -1.3000000,    2.2500000,   -0.7280000},
			  {  -0.7280000,    2.2500000,   -1.3000000},
			  {   0.0000000,    2.2500000,   -1.3000000},
			  {   0.2240000,    2.4000000,   -0.4000000},
			  {   0.4000000,    2.4000000,   -0.2240000},
			  {   0.7280000,    2.4000000,   -1.3000000},
			  {   1.3000000,    2.4000000,   -0.7280000},
			  {   0.7280000,    2.2500000,   -1.3000000},
			  {   1.3000000,    2.2500000,   -0.7280000},
			};
	int tIndices[][][] = {
			  {
			    {  0,  1,  2,  3},
			    {  4,  5,  6,  7},
			    {  8,  9, 10, 11},
			    { 12, 13, 14, 15},
			  },
			  {
			    {  3, 16, 17, 18},
			    {  7, 19, 20, 21},
			    { 11, 22, 23, 24},
			    { 15, 25, 26, 27},
			  },
			  {
			    { 18, 28, 29, 30},
			    { 21, 31, 32, 33},
			    { 24, 34, 35, 36},
			    { 27, 37, 38, 39},
			  },
			  {
			    { 30, 40, 41,  0},
			    { 33, 42, 43,  4},
			    { 36, 44, 45,  8},
			    { 39, 46, 47, 12},
			  },
			  {
			    { 12, 13, 14, 15},
			    { 48, 49, 50, 51},
			    { 52, 53, 54, 55},
			    { 56, 57, 58, 59},
			  },
			  {
			    { 15, 25, 26, 27},
			    { 51, 60, 61, 62},
			    { 55, 63, 64, 65},
			    { 59, 66, 67, 68},
			  },
			  {
			    { 27, 37, 38, 39},
			    { 62, 69, 70, 71},
			    { 65, 72, 73, 74},
			    { 68, 75, 76, 77},
			  },
			  {
			    { 39, 46, 47, 12},
			    { 71, 78, 79, 48},
			    { 74, 80, 81, 52},
			    { 77, 82, 83, 56},
			  },
			  {
			    { 56, 57, 58, 59},
			    { 84, 85, 86, 87},
			    { 88, 89, 90, 91},
			    { 92, 93, 94, 95},
			  },
			  {
			    { 59, 66, 67, 68},
			    { 87, 96, 97, 98},
			    { 91, 99,100,101},
			    { 95,102,103,104},
			  },
			  {
			    { 68, 75, 76, 77},
			    { 98,105,106,107},
			    {101,108,109,110},
			    {104,111,112,113},
			  },
			  {
			    { 77, 82, 83, 56},
			    {107,114,115, 84},
			    {110,116,117, 88},
			    {113,118,119, 92},
			  },
			  {
			    {120,121,122,123},
			    {124,125,126,127},
			    {128,129,130,131},
			    {132,133,134,135},
			  },
			  {
			    {123,136,137,120},
			    {127,138,139,124},
			    {131,140,141,128},
			    {135,142,143,132},
			  },
			  {
			    {132,133,134,135},
			    {144,145,146,147},
			    {148,149,150,151},
			    { 68,152,153,154},
			  },
			  {
			    {135,142,143,132},
			    {147,155,156,144},
			    {151,157,158,148},
			    {154,159,160, 68},
			  },
			  {
			    {161,162,163,164},
			    {165,166,167,168},
			    {169,170,171,172},
			    {173,174,175,176},
			  },
			  {
			    {164,177,178,161},
			    {168,179,180,165},
			    {172,181,182,169},
			    {176,183,184,173},
			  },
			  {
			    {173,174,175,176},
			    {185,186,187,188},
			    {189,190,191,192},
			    {193,194,195,196},
			  },
			  {
			    {176,183,184,173},
			    {188,197,198,185},
			    {192,199,200,189},
			    {196,201,202,193},
			  },
			  {
			    {203,204,205,203},
			    {206,207,208,209},
			    {210,210,210,210},
			    {211,212,213,214},
			  },
			  {
			    {203,215,204,203},
			    {209,216,217,218},
			    {210,210,210,210},
			    {214,219,220,221},
			  },
			  {
			    {203,222,215,203},
			    {218,223,224,225},
			    {210,210,210,210},
			    {221,226,227,228},
			  },
			  {
			    {203,205,222,203},
			    {225,229,230,206},
			    {210,210,210,210},
			    {228,231,232,211},
			  },
			  {
			    {211,212,213,214},
			    {233,234,235,236},
			    {237,238,239,240},
			    {241,242,243,244},
			  },
			  {
			    {214,219,220,221},
			    {236,245,246,247},
			    {240,248,249,250},
			    {244,251,252,253},
			  },
			  {
			    {221,226,227,228},
			    {247,254,255,256},
			    {250,257,258,259},
			    {253,260,261,262},
			  },
			  {
			    {228,231,232,211},
			    {256,263,264,233},
			    {259,265,266,237},
			    {262,267,268,241},
			  },
		};
	
	public Teapot(Vector origin, double scale, MaterialProps m){
		//TODO: implement rotation of teapot
		// add by origin, multiply by scale
		Vec4 one, two, three, four;
		mats = m;
		// add all patches to beziers arraylist
		for(int i = 0; i < NUM_PATCHES; i++){
			one   = new Vec4(new Vector(tVerts[tIndices[i][0][0]]), new Vector(tVerts[tIndices[i][0][1]]), new Vector(tVerts[tIndices[i][0][2]]), new Vector(tVerts[tIndices[i][0][3]]));
			two   = new Vec4(new Vector(tVerts[tIndices[i][1][0]]), new Vector(tVerts[tIndices[i][1][1]]), new Vector(tVerts[tIndices[i][1][2]]), new Vector(tVerts[tIndices[i][1][3]]));
			three = new Vec4(new Vector(tVerts[tIndices[i][2][0]]), new Vector(tVerts[tIndices[i][2][1]]), new Vector(tVerts[tIndices[i][2][2]]), new Vector(tVerts[tIndices[i][2][3]]));
			four  = new Vec4(new Vector(tVerts[tIndices[i][3][0]]), new Vector(tVerts[tIndices[i][3][1]]), new Vector(tVerts[tIndices[i][3][2]]), new Vector(tVerts[tIndices[i][3][3]]));
			one.add(origin);
			two.add(origin);
			three.add(origin);
			four.add(origin);
			one.scale(scale);
			two.scale(scale);
			three.scale(scale);
			four.scale(scale);
			beziers.add(new Bezier(new BPoints(one,two,three,four), m));
		}
	}
	
	public HitInfo rayHit(Vector o, Vector d, double tmin, double tmax) {
		HitInfo info, temp;
		info = new HitInfo(-1.0,null,null,null);
		for(int i = 0; i < NUM_PATCHES; i++){
			temp = beziers.get(i).rayHit(o, d, tmin, tmax);
			if(info.t < 0 && temp.t > 0){
				info = temp;
			}else if(temp.t < info.t && temp.t > 0){
				info = temp;
			}
		}
		return info;
	}
	
	public boolean shadowHit(Vector o, Vector d, double tmin, double tmax) {
		if(this.rayHit(o,d,tmin,tmax).t > 0){
			return true;
		}
		return false;
	}

	
	public MaterialProps materials() {
		// get the mats for this RayObject, mainly for shadow computations
		return mats;
	}
}
